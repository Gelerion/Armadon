tasks.register('build') {
  gradle.includedBuilds.each { build ->
    dependsOn gradle.includedBuild(build.name).task(":build")
  }
}

tasks.register('buildImage') {
  gradle.includedBuilds.findAll{it.name != "admin"}.each { build ->
    dependsOn gradle.includedBuild(build.name).task(":buildImage")
  }
}

tasks.register('setGradleVersion') {
  gradle.includedBuilds.each { build ->
    dependsOn gradle.includedBuild(build.name).task(':wrapper')
  }
}

wrapper {
  gradleVersion = '6.7.1'
  distributionUrl = distributionUrl.replace("bin", "all")
}
